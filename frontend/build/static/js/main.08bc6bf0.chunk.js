(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{115:function(e,t,n){},135:function(e,t){},137:function(e,t){},160:function(e,t,n){},169:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(10),i=n.n(r),s=(n(115),n(58)),l=n.n(s),o=n(90),u=n(20),j=n(201),b=n(202),d=n(203),O=n(102),f=n.n(O),m=n(103),v=n.n(m),h=n(91),x=n(59),g=n.n(x),p=n(92),y=n.n(p),C=(n(160),n(6)),S=y.a.connect("http://localhost:5000");var w=function(){var e=Object(c.useState)(""),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(),i=Object(u.a)(r,2),s=i[0],O=i[1],m=Object(c.useState)(!1),x=Object(u.a)(m,2),p=x[0],y=x[1],w=Object(c.useState)(""),k=Object(u.a)(w,2),I=k[0],N=k[1],D=Object(c.useState)(),F=Object(u.a)(D,2),A=F[0],B=F[1],P=Object(c.useState)(!1),T=Object(u.a)(P,2),E=T[0],R=T[1],U=Object(c.useState)(""),z=Object(u.a)(U,2),J=z[0],L=z[1],M=Object(c.useState)(!1),V=Object(u.a)(M,2),q=V[0],G=V[1],H=Object(c.useState)(""),K=Object(u.a)(H,2),Q=K[0],W=K[1],X=Object(c.useRef)(),Y=Object(c.useRef)(),Z=Object(c.useRef)(),$=function(){var e=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({video:!0,audio:!0});case 3:t=e.sent,O(t),X.current.srcObject=t,e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",console.log("".concat(e.t0.name,": ").concat(e.t0.message)));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){$(),S.on("me",(function(e){a(e)})),S.on("callUser",(function(e){y(!0),N(e.from),W(e.name),B(e.signal)}))}),[]),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("h1",{style:{textAlign:"center",color:"#fff"},children:"Video Chat App"}),Object(C.jsxs)("div",{className:"container",children:[Object(C.jsxs)("div",{className:"video-container",children:[Object(C.jsx)("div",{className:"video",children:s&&Object(C.jsx)("video",{playsInline:!0,muted:!0,ref:X,autoPlay:!0,style:{width:"300px"}})}),Object(C.jsx)("div",{className:"video",children:E&&!q?Object(C.jsx)("video",{playsInline:!0,ref:Y,autoPlay:!0,style:{width:"300px"}}):null})]}),Object(C.jsxs)("div",{className:"myId",children:[Object(C.jsx)(d.a,{id:"filled-basic",label:"Name",variant:"filled",value:Q,onChange:function(e){return W(e.target.value)},style:{marginBottom:"20px"}}),Object(C.jsx)(h.CopyToClipboard,{text:n,style:{marginBottom:"2rem"},children:Object(C.jsx)(j.a,{variant:"contained",color:"primary",startIcon:Object(C.jsx)(f.a,{fontSize:"large"}),children:"Copy ID"})}),Object(C.jsx)(d.a,{id:"filled-basic",label:"ID to call",variant:"filled",value:J,onChange:function(e){return L(e.target.value)}}),Object(C.jsxs)("div",{className:"call-button",children:[E&&!q?Object(C.jsx)(j.a,{variant:"contained",color:"secondary",onClick:function(){G(!0),Z.current.destroy()},children:"End Call"}):Object(C.jsx)(b.a,{color:"primary","aria-label":"call",onClick:function(){return function(e){var t=new g.a({initiator:!0,trickle:!1,stream:s});t.on("signal",(function(t){S.emit("callUser",{userToCall:e,signalData:t,from:n,name:Q})})),t.on("stream",(function(e){Y.current.srcObject=e})),S.on("callAccepted",(function(e){R(!0),t.signal(e)})),Z.current=t}(J)},children:Object(C.jsx)(v.a,{fontSize:"large"})}),J]})]}),Object(C.jsx)("div",{children:p&&!E?Object(C.jsxs)("div",{className:"caller",children:[Object(C.jsxs)("h1",{children:[Q," is calling..."]}),Object(C.jsx)(j.a,{variant:"contained",color:"primary",onClick:function(){R(!0);var e=new g.a({initiator:!1,trickle:!1,stream:s});e.on("signal",(function(e){S.emit("answerCall",{signal:e,to:I})})),e.on("stream",(function(e){Y.current.srcObject=e})),e.signal(A),Z.current=e},children:"Answer"})]}):null})]})]})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,205)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))};i.a.render(Object(C.jsx)(a.a.StrictMode,{children:Object(C.jsx)(w,{})}),document.getElementById("root")),k()}},[[169,1,2]]]);
//# sourceMappingURL=main.08bc6bf0.chunk.js.map